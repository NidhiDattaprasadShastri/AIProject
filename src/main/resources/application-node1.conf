akka {
  loglevel = "INFO"

  actor {
    provider = cluster

    serialization-bindings {
      "com.diplomatic.messages.CborSerializable" = jackson-cbor
    }

    allow-java-serialization = on
    warn-about-java-serializer-usage = off

    # CRITICAL FIX: Disable serialization checks for local messages
    serialize-messages = off
    serialize-creators = off
  }

  remote.artery {
    canonical {
      hostname = "127.0.0.1"
      port = 2551
    }
  }

  cluster {
    seed-nodes = [
      "akka://DiplomaticAssistantSystem@127.0.0.1:2551",
      "akka://DiplomaticAssistantSystem@127.0.0.1:2552"
    ]

    roles = ["infrastructure", "frontend"]
    downing-provider-class = "akka.cluster.sbr.SplitBrainResolverProvider"
    min-nr-of-members = 1
  }
}

diplomatic-assistant {
  node-role = "infrastructure"
  session-timeout-minutes = 30
  max-active-sessions = 100
}